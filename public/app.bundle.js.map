{"version":3,"sources":["webpack:///webpack/bootstrap c8052db96e536a52d0de","webpack:///./app.js","webpack:///./assets/scss/main.scss","webpack:///./assets/js/main.js","webpack:///./assets/js/form.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;AC7DA;AACA;AACA;;;;;;;ACFA,yC;;;;;;ACAA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;;;AAIA;AACA,oEAAoE,UAAU;;AAE9E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;;;AAGD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,KAAK;AACL;AACA,W","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c8052db96e536a52d0de","import \"./assets/scss/main.scss\";\r\nimport \"./assets/js/main.js\";\r\nimport \"./assets/js/form.js\";\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app.js\n// module id = 0\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/scss/main.scss\n// module id = 1\n// module chunks = 0","// global variables\r\nlet entryFields = document.querySelectorAll('.calc__input');\r\nlet sumField = document.querySelector('.calc__input--sum');\r\nlet price = [];\r\n\r\n// function get total quantity of packs in object\r\nfunction getTotalQuantity() {\r\n\r\n    let quantity = {};\r\n    let inputA5 = document.querySelector('.calc__input--a5');\r\n    let inputA4 = document.querySelector('.calc__input--a4');\r\n    let inputA3 = document.querySelector('.calc__input--a3');\r\n    let inputA3plus = document.querySelector('.calc__input--a3plus');\r\n    let inputA2 = document.querySelector('.calc__input--a2');\r\n    quantity.a5 = parseInt(inputA5.value);\r\n    quantity.a4 = parseInt(inputA4.value);\r\n    quantity.a3 = parseInt(inputA3.value);\r\n    quantity.a3plus = parseInt(inputA3plus.value);\r\n    quantity.a2 = parseInt(inputA2.value);\r\n    return quantity;\r\n}\r\n\r\n// function calc sum from object all quantity of packs\r\nfunction calcTotalQuantity(order) {\r\n\r\n    const totalQuantity = order => Object.values(order).reduce((a, b) => a + b);\r\n    return totalQuantity(order);\r\n}\r\n\r\n// function get tariff dependent on total amount of pucks\r\nfunction getTariff(totalAmount) {\r\n    switch (true) {\r\n        case (totalAmount < 50) :\r\n            return 'price1';\r\n        case (totalAmount >= 50 && totalAmount < 100) :\r\n            return 'price2';\r\n        case (totalAmount >= 100) :\r\n            return 'price3';\r\n        default :\r\n            return 'price1';\r\n    }\r\n}\r\n\r\n// function do calculations\r\nfunction reCalc() {\r\n    let order = getTotalQuantity();\r\n    let totalAmount = calcTotalQuantity(order);\r\n    let tarif = getTariff(totalAmount);\r\n\r\n    showPayment(tarif, order, totalAmount);\r\n    sumField.value = totalAmount;\r\n    document.querySelector('.computation__bill').value = +(order.total).toFixed(2);\r\n}\r\n\r\n// function get format tarif\r\nfunction getFormatTarif(format) {\r\n    for (let i = 0, len = price.length; i < len; i++) {\r\n        if (price[i].name === format) {\r\n            return price[i];\r\n        }\r\n    }\r\n}\r\n\r\n// function show payment info\r\nfunction showPayment(tarif, order) {\r\n\r\n    let allPayments = document.querySelectorAll('.computation__box');\r\n    order.total = 0;\r\n\r\n    allPayments.forEach(function (elem) {\r\n        let format = elem.dataset.type;\r\n        let formatTarif = getFormatTarif(format);\r\n        let formatAmount = order[format];\r\n        let curentTariff = formatTarif[tarif]/100;\r\n\r\n        let totalSum;\r\n        totalSum = +(formatAmount * curentTariff).toFixed(2);\r\n\r\n        elem.querySelector('.computation__amount').innerText = formatAmount;\r\n        elem.querySelector('.computation__price').innerText = curentTariff;\r\n        elem.querySelector('.computation__total').innerText = totalSum;\r\n        order.total = order.total + totalSum;\r\n    })\r\n}\r\n\r\n\r\n\r\nentryFields.forEach(function (elem) {\r\n    let computationAmount = document.querySelector(`[data-amount=\"${elem.name}\"]`);\r\n\r\n    computationAmount.innerText = elem.value;\r\n    elem.addEventListener('input', () => {\r\n        if (elem.value === '') {\r\n            elem.value = 0;\r\n        }\r\n\r\n        computationAmount.innerText = elem.value;\r\n        reCalc();\r\n    });\r\n    elem.addEventListener('focus', () => {\r\n        if (elem.value == 0) {\r\n            elem.value = '';\r\n        }\r\n    });\r\n    elem.addEventListener('blur', () => {\r\n        if (elem.value === '') {\r\n            elem.value = 0;\r\n        }\r\n    })\r\n});\r\n\r\n\r\nfunction getPrices() {\r\n    fetch('/prices')\r\n        .then(function (response) {\r\n            return response.json();\r\n        })\r\n        .then(function (prices) {\r\n            price = prices;\r\n            printPrices();\r\n        })\r\n}\r\n\r\ngetPrices();\r\n\r\nfunction printPrices() {\r\n\r\n    let arrPrices = price;\r\n    let pricesA5 = arrPrices[0];\r\n    let pricesA4 = arrPrices[1];\r\n    let pricesA3 = arrPrices[2];\r\n    let pricesA3plus = arrPrices[3];\r\n    let pricesA2 = arrPrices[4];\r\n\r\n    document.querySelector('[data-price-a5=\"price1\"]').innerText = (pricesA5.price1) / 100;\r\n    document.querySelector('[data-price-a5=\"price2\"]').innerText = (pricesA5.price2) / 100;\r\n    document.querySelector('[data-price-a5=\"price3\"]').innerText = (pricesA5.price3) / 100;\r\n\r\n\r\n    document.querySelector('[data-price-a4=\"price1\"]').innerText = (pricesA4.price1) / 100;\r\n    document.querySelector('[data-price-a4=\"price2\"]').innerText = (pricesA4.price2) / 100;\r\n    document.querySelector('[data-price-a4=\"price3\"]').innerText = (pricesA4.price3) / 100;\r\n\r\n\r\n    document.querySelector('[data-price-a3=\"price1\"]').innerText = (pricesA3.price1) / 100;\r\n    document.querySelector('[data-price-a3=\"price2\"]').innerText = (pricesA3.price2) / 100;\r\n    document.querySelector('[data-price-a3=\"price3\"]').innerText = (pricesA3.price3) / 100;\r\n\r\n\r\n    document.querySelector('[data-price-a3plus=\"price1\"]').innerText = (pricesA3plus.price1) / 100;\r\n    document.querySelector('[data-price-a3plus=\"price2\"]').innerText = (pricesA3plus.price2) / 100;\r\n    document.querySelector('[data-price-a3plus=\"price3\"]').innerText = (pricesA3plus.price3) / 100;\r\n\r\n    document.querySelector('[data-price-a2=\"price1\"]').innerText = (pricesA2.price1) / 100;\r\n    document.querySelector('[data-price-a2=\"price2\"]').innerText = (pricesA2.price2) / 100;\r\n    document.querySelector('[data-price-a2=\"price3\"]').innerText = (pricesA2.price3) / 100;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/js/main.js\n// module id = 2\n// module chunks = 0","function sendForm() {\r\n    let form = document.querySelector('.form');\r\n    form.addEventListener('submit', function (event) {\r\n        event.preventDefault();\r\n        let data = {};\r\n        let myHeaders = new Headers();\r\n        myHeaders.append('Content-Type', 'application/json');\r\n        data.name = document.querySelector('.form__input--name').value;\r\n        data.city = document.querySelector('.form__input--city').value;\r\n        data.address = document.querySelector('.form__input--address').value;\r\n        data.phone = document.querySelector('.form__input--phone').value;\r\n        data.a5 = document.querySelector('.calc__input--a5').value;\r\n        data.a4 = document.querySelector('.calc__input--a4').value;\r\n        data.a3 = document.querySelector('.calc__input--a3').value;\r\n        data.a3plus = document.querySelector('.calc__input--a3plus').value;\r\n        data.a2 = document.querySelector('.calc__input--a2').value;\r\n        data.bill = document.querySelector('.computation__bill').value;\r\n\r\n\r\n        fetch('/send', {\r\n                method: 'POST',\r\n                body: JSON.stringify(data),\r\n                headers: myHeaders,\r\n                mode: 'cors',\r\n                cache: 'default'\r\n            })\r\n            .then(function (res) {\r\n                return res.text();\r\n            })\r\n            .then(function (data) {\r\n                alert(data)\r\n            })\r\n    });\r\n}\r\nsendForm();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/js/form.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}